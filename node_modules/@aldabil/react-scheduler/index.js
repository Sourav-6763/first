(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Scheduler:()=>ot});const n=require("react/jsx-runtime"),a=require("react"),r=require("date-fns"),i=(e,t,n)=>{var a;const r=(null===(a=e.config)||void 0===a?void 0:a.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),i=r?t?[t]:[]:t;return{value:i,validity:r?i.length:i}},s=(e,t,n,a)=>{var r;const i=n.idField,s=a.find((e=>e.name===i)),o=!!(null===(r=null==s?void 0:s.config)||void 0===r?void 0:r.multiple),l=[];for(const a of e){const e=o&&!Array.isArray(a[i])?[a[i]]:a[i];(o||Array.isArray(e)?e.includes(t[i]):e===t[i])&&l.push(Object.assign(Object.assign({},a),{color:a.color||t[n.colorField||""]}))}return l},o=(e,t)=>Math.ceil(e)/t,l=(e,t)=>Math.max(e/t,60),d=(e,t)=>(0,r.differenceInDays)((0,r.endOfDay)((0,r.addSeconds)(t,-1)),(0,r.startOfDay)(e)),c=(e,t,n)=>{const a=[];for(let i=0;i<e.length;i++){const s=y(e[i],n);s.allDay||!(0,r.isSameDay)(t,s.start)||d(s.start,s.end)||a.push(s)}return g(a)},u=(e,t)=>{const n=e.filter((e=>(0,r.isWithinInterval)(t,{start:(0,r.startOfDay)(e.start),end:(0,r.endOfDay)((0,r.subMinutes)(e.end,1))})));return h(n)},g=e=>e.sort(((e,t)=>{const n=e.end.getTime()-e.start.getTime();return t.end.getTime()-t.start.getTime()-n})),h=e=>e.sort(((e,t)=>e.allDay?-1:e.start.getTime()-t.start.getTime())),v=(e,t,n,a)=>{var i;const s=Array.isArray(t),o=[],l={};for(let a=0;a<e.length;a++){const i=y(e[a],n);let c=i.allDay||d(i.start,i.end)>0;if(c&&(c=s?t.some((e=>(0,r.isWithinInterval)(e,{start:(0,r.startOfDay)(i.start),end:(0,r.endOfDay)(i.end)}))):(0,r.isWithinInterval)(t,{start:(0,r.startOfDay)(i.start),end:(0,r.endOfDay)(i.end)}),c))if(o.push(i),s)for(const e of t){const t=(0,r.format)(e,"yyyy-MM-dd");(0,r.isWithinInterval)(e,{start:(0,r.startOfDay)(i.start),end:(0,r.endOfDay)(i.end)})&&(l[t]=(l[t]||[]).concat(i))}else{const e=(0,r.format)(i.start,"yyyy-MM-dd");l[e]=(l[e]||[]).concat(i)}}return s&&a?(null===(i=Object.values(l).sort(((e,t)=>t.length-e.length)))||void 0===i?void 0:i[0])||[]:o},y=(e,t)=>Object.assign(Object.assign({},e),{start:p(e.start,t),end:p(e.end,t),convertedTz:!0}),p=(e,t)=>new Date(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"medium",timeZone:t}).format(e)),m=(e,t)=>{if(!t)return e;const n=-e.getTimezoneOffset(),a=function(e){const t=new Date,n=new Date(t.toLocaleString("en-US",{timeZone:e})),a=new Date(t.toLocaleString("en-US",{timeZone:"UTC"}));return Math.round((n.getTime()-a.getTime())/6e4)}(t),r=n-a;return new Date(e.getTime()+60*r*1e3)},f=({dateLeft:e,dateRight:t,timeZone:n})=>(0,r.isSameDay)(e,p(t||new Date,n)),j=e=>"12"===e?"hh:mm a":"HH:mm",x=require("@mui/material"),b=require("date-fns/locale");var O=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const _={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,navigation:!0,disableGoToDay:!1},w={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,step:60,navigation:!0,disableGoToDay:!1},D={startHour:9,endHour:17,step:60,navigation:!0},k={idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},C=(e={})=>{const{navigation:t,form:n,event:a}=e,r=O(e,["navigation","form","event"]);return Object.assign({navigation:Object.assign({month:"Month",week:"Week",day:"Day",agenda:"Agenda",today:"Today"},t),form:Object.assign({addTitle:"Add Event",editTitle:"Edit Event",confirm:"Confirm",delete:"Delete",cancel:"Cancel"},n),event:Object.assign({title:"Title",start:"Start",end:"End",allDay:"All Day"},a)},Object.assign({moreEvents:"More...",loading:"Loading...",noDataToDisplay:"No data to display"},r))},M=e=>{const{month:t,week:n,day:a,translations:r,resourceFields:i,view:s,agenda:o,selectedDate:l}=e,d=O(e,["month","week","day","translations","resourceFields","view","agenda","selectedDate"]),c=(e=>{const{month:t,week:n,day:a}=e;return{month:null!==t?Object.assign(_,t):null,week:null!==n?Object.assign(w,n):null,day:null!==a?Object.assign(D,a):null}})(e),u=s||"week",g=c[u]?u:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(c);return Object.assign(Object.assign(Object.assign({},c),{translations:C(r),resourceFields:Object.assign(k,i),view:g,selectedDate:p(l||new Date,e.timeZone)}),Object.assign({height:600,navigation:!0,disableViewNavigator:!1,events:[],fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],resourceHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:b.enUS,deletable:!0,editable:!0,hourFormat:"12",draggable:!0,agenda:o,enableAgenda:void 0===o||o},d))},T=Object.assign(Object.assign({},M({})),{setProps:()=>{},dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],toggleAgenda:()=>{},triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},setCurrentDragged:()=>{},onDrop:()=>{}}),S=(0,a.createContext)(T),F=()=>(0,a.useContext)(S),E=({resource:e})=>{const{resourceHeaderComponent:t,resourceFields:a,direction:r,resourceViewMode:i}=F(),s=(0,x.useTheme)(),o=e[a.textField],l=e[a.subTextField||""],d=e[a.avatarField||""],c=e[a.colorField||""];return t instanceof Function?t(e):(0,n.jsxs)(x.ListItem,Object.assign({sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===r?"right":"left"},"tabs"===i?{}:"vertical"===i?{display:"block",textAlign:"center",position:"sticky",top:4}:{borderColor:s.palette.grey[300],borderStyle:"solid",borderWidth:1}),component:"div"},{children:[(0,n.jsx)(x.ListItemAvatar,{children:(0,n.jsx)(x.Avatar,{sx:{background:c,margin:"auto"},alt:o,src:d})}),(0,n.jsx)(x.ListItemText,{primary:(0,n.jsx)(x.Typography,Object.assign({variant:"body2",noWrap:"vertical"!==i},{children:o})),secondary:(0,n.jsx)(x.Typography,Object.assign({variant:"caption",color:"textSecondary",noWrap:"vertical"!==i},{children:l}))})]}))};function I(e){const{children:t,value:a,index:r}=e;return a===r?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(n.Fragment,{})}const R=(0,require("@mui/material/styles").styled)("div")((({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:e.palette.grey[300],borderStyle:"solid",borderWidth:1,"& button.MuiTab-root":{borderColor:e.palette.grey[300],borderRightStyle:"solid",borderWidth:1}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}}))),N=({tabs:e,variant:t="scrollable",tab:a,setTab:r,indicator:i="primary",style:s})=>(0,n.jsxs)(R,Object.assign({style:s},{children:[(0,n.jsx)(x.Tabs,Object.assign({value:a,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:i}},{children:e.map(((e,t)=>{return(0,n.jsx)(x.Tab,Object.assign({label:e.label,sx:{flex:1,flexBasis:200,flexShrink:0},value:e.id},{id:`scrollable-auto-tab-${a=e.id}`,"aria-controls":`scrollable-auto-tabpanel-${a}`},{onClick:()=>r(e.id),onDragEnter:()=>r(e.id)}),e.id||t);var a}))})),e.map(((e,t)=>e.component&&(0,n.jsx)(I,Object.assign({value:a,index:e.id},{children:e.component}),t)))]})),P=({renderChildren:e})=>{const{resources:t,resourceFields:a,resourceViewMode:r}=F(),i=(0,x.useTheme)();return"tabs"===r?(0,n.jsx)($,{renderChildren:e}):"vertical"===r?(0,n.jsx)(n.Fragment,{children:t.map(((t,r)=>(0,n.jsxs)(x.Box,Object.assign({sx:{display:"flex"}},{children:[(0,n.jsx)(x.Box,Object.assign({sx:{borderColor:i.palette.grey[300],borderStyle:"solid",borderWidth:"1px 1px 0 1px",paddingTop:1,flexBasis:140}},{children:(0,n.jsx)(E,{resource:t})})),(0,n.jsx)(x.Box,Object.assign({sx:{width:"100%",overflowX:"auto"}},{children:e(t)}))]}),`${t[a.idField]}_${r}`)))}):(0,n.jsx)(n.Fragment,{children:t.map(((t,r)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(E,{resource:t}),e(t)]},`${t[a.idField]}_${r}`)))})},$=({renderChildren:e})=>{const{resources:t,resourceFields:r,selectedResource:i,handleState:s}=F(),o=t.map((t=>({id:t[r.idField],label:(0,n.jsx)(E,{resource:t}),component:(0,n.jsx)(n.Fragment,{children:e(t)})}))),l=(0,a.useMemo)((()=>{const e=t[0][r.idField];return i?t.findIndex((e=>e[r.idField]===i))<0?e:i:e}),[t,i,r.idField]);return(0,n.jsx)(N,{tabs:o,tab:l,setTab:e=>{s(e,"selectedResource")},style:{display:"grid"}})},W=(0,x.styled)("div")((({theme:e,dialog:t})=>({position:"relative","& .rs__table_loading":{position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:999999,"& .rs__table_loading_internal":{background:t?"":(0,x.alpha)(e.palette.background.paper,.4),height:"100%","& > span":{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column","& >span":{marginBottom:15}}}}}))),L=(0,x.styled)("div")((({resource_count:e})=>({position:"relative",display:"flex",flexDirection:e>1?"row":"column",width:"100%",boxSizing:"content-box","& > div":{flexShrink:0,flexGrow:1}}))),A=(0,x.styled)(x.Paper)((({sticky:e="0"})=>({display:"flex",justifyContent:"space-between",alignItems:"center",position:"1"===e?"sticky":"relative",top:"1"===e?0:void 0,zIndex:"1"===e?999:void 0,boxShadow:"none",padding:"2px 0","& > .rs__view_navigator":{display:"flex",alignItems:"center"}}))),B=(0,x.styled)("div")((({theme:e})=>({borderStyle:"solid",borderColor:e.palette.grey[300],borderWidth:"1px 1px 0 0","& > .rs__agenda_row":{display:"flex","& >.rs__agenda__cell":{padding:4,width:"100%",maxWidth:60,"& > .MuiTypography-root":{position:"sticky",top:0,"&.rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}}}},"& .rs__cell":{borderStyle:"solid",borderColor:e.palette.grey[300],borderWidth:"0 0 1px 1px"},"& > .rs__agenda_items":{flexGrow:1}}}))),H=(0,x.styled)("div")((({days:e,sticky:t="0",stickyNavigation:n,indent:a="1",theme:r})=>({display:"grid",gridTemplateColumns:+a>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,overflowX:"auto",overflowY:"hidden",position:"1"===t?"sticky":"relative",top:"1"===t?n?36:0:void 0,zIndex:"1"===t?99:void 0,[r.breakpoints.down("sm")]:{gridTemplateColumns:+a>0?`30px repeat(${e}, 1fr)`:""},borderStyle:"solid",borderColor:r.palette.grey[300],borderWidth:"0 0 0 1px","&:first-of-type":{borderWidth:"1px 0 0 1px"},"&:last-of-type":{borderWidth:"0 0 1px 1px"},"& .rs__cell":{background:r.palette.background.paper,position:"relative",borderStyle:"solid",borderColor:r.palette.grey[300],borderWidth:"0 1px 1px 0","&.rs__header":{"& > :first-of-type":{padding:"2px 5px"}},"&.rs__header__center":{padding:"6px 0px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",position:"sticky",left:0,zIndex:99,[r.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},"& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:(0,x.alpha)(r.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}},"&:not(.rs__time)":{minWidth:65}}}))),z=(0,x.styled)(x.Paper)((({disabled:e})=>({width:"99.5%",height:"100%",display:"block",cursor:e?"not-allowed":"pointer",overflow:"hidden","& .MuiButtonBase-root":{width:"100%",height:"100%",display:"block",textAlign:"left","& > div":{height:"100%"}}}))),q=(0,x.styled)("div")((({theme:e})=>({maxWidth:"100%",width:400,"& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiIconButton-root":{color:e.palette.primary.contrastText}}}}))),V=(0,x.styled)("div")((({theme:e})=>({display:"inherit","& .MuiIconButton-root":{color:e.palette.primary.contrastText},"& .MuiButton-root":{"&.delete":{color:e.palette.error.main},"&.cancel":{color:e.palette.action.disabled}}}))),Z=(0,x.styled)("div")((({theme:e})=>({position:"absolute",zIndex:9,width:"100%",display:"flex","& > div:first-of-type":{height:12,width:12,borderRadius:"50%",background:e.palette.error.light,marginLeft:-6,marginTop:-5},"& > div:last-of-type":{borderTop:`solid 2px ${e.palette.error.light}`,width:"100%"}}))),G=require("@mui/icons-material/DeleteRounded");var U=e.n(G);const K=require("@mui/icons-material/EditRounded");var X=e.n(K);const Q=e=>{const{editable:t,deletable:n,draggable:r}=F(),i=(0,a.useMemo)((()=>void 0!==e.editable?e.editable:t),[t,e.editable]),s=(0,a.useMemo)((()=>void 0!==e.deletable?e.deletable:n),[n,e.deletable]),o=(0,a.useMemo)((()=>{if(i)return void 0!==e.draggable?e.draggable:r}),[r,e.draggable,i]);return{canEdit:i,canDelete:s,canDrag:o}},Y=({event:e,onDelete:t,onEdit:r})=>{const{translations:i,direction:s}=F(),[o,l]=(0,a.useState)(!1),d=()=>{if(!o)return l(!0);t()},{canEdit:c,canDelete:u}=Q(e);return(0,n.jsxs)(V,{children:[(0,n.jsx)(x.Grow,Object.assign({in:!o,exit:!1,timeout:400,unmountOnExit:!0},{children:(0,n.jsxs)("div",{children:[c&&(0,n.jsx)(x.IconButton,Object.assign({size:"small",onClick:r},{children:(0,n.jsx)(X(),{})})),u&&(0,n.jsx)(x.IconButton,Object.assign({size:"small",onClick:d},{children:(0,n.jsx)(U(),{})}))]})})),(0,n.jsx)(x.Slide,Object.assign({in:o,direction:"rtl"===s?"right":"left",unmountOnExit:!0,timeout:400,exit:!1},{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(x.Button,Object.assign({className:"delete",size:"small",onClick:d},{children:i.form.delete.toUpperCase()})),(0,n.jsx)(x.Button,Object.assign({className:"cancel",size:"small",onClick:()=>l(!1)},{children:i.form.cancel.toUpperCase()}))]})}))]})},J=require("@mui/icons-material/EventNoteRounded");var ee=e.n(J);const te=require("@mui/icons-material/ClearRounded");var ne=e.n(te);const ae=require("@mui/icons-material/SupervisorAccountRounded");var re=e.n(ae);const ie=({anchorEl:e,event:t,onTriggerViewer:a})=>{const{triggerDialog:i,onDelete:s,events:o,handleState:l,triggerLoading:c,customViewer:u,viewerExtraComponent:g,fields:h,resources:v,resourceFields:y,locale:p,viewerTitleComponent:m,hourFormat:f,translations:b,onEventEdit:O}=F(),_=(0,x.useTheme)(),w=d(t.start,t.end)<=0&&t.allDay,D=j(f),k=y.idField,C=v.filter((e=>Array.isArray(t[k])?t[k].includes(e[k]):e[k]===t[k]));return(0,n.jsx)(x.Popover,Object.assign({open:Boolean(e),anchorEl:e,onClose:()=>{a()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},{children:"function"==typeof u?u(t,(()=>a())):(0,n.jsxs)(q,{children:[(0,n.jsxs)(x.Box,Object.assign({sx:{bgcolor:t.color||_.palette.primary.main,color:_.palette.primary.contrastText}},{children:[(0,n.jsxs)("div",Object.assign({className:"rs__popper_actions"},{children:[(0,n.jsx)("div",{children:(0,n.jsx)(x.IconButton,Object.assign({size:"small",onClick:()=>{a()}},{children:(0,n.jsx)(ne(),{color:"disabled"})}))}),(0,n.jsx)(Y,{event:t,onDelete:()=>{return e=void 0,n=void 0,i=function*(){try{c(!0);let e=t.event_id;if(s){const t=yield s(e);e=t||""}if(e){a();const t=o.filter((t=>t.event_id!==e));l(t,"events")}}catch(e){console.error(e)}finally{c(!1)}},new((r=void 0)||(r=Promise))((function(t,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,o)}l((i=i.apply(e,n||[])).next())}));var e,n,r,i},onEdit:()=>{a(),i(!0,t),O&&"function"==typeof O&&O(t)}})]})),m instanceof Function?m(t):(0,n.jsx)(x.Typography,Object.assign({style:{padding:"5px 0"},noWrap:!0},{children:t.title}))]})),(0,n.jsxs)("div",Object.assign({style:{padding:"5px 10px"}},{children:[(0,n.jsxs)(x.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(ee(),{}),w?b.event.allDay:`${(0,r.format)(t.start,`dd MMMM yyyy ${D}`,{locale:p})} - ${(0,r.format)(t.end,`dd MMMM yyyy ${D}`,{locale:p})}`]})),C.length>0&&(0,n.jsxs)(x.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(re(),{}),C.map((e=>e[y.textField])).join(", ")]})),g instanceof Function?g(h,t):g]}))]})}))},se=({day:e,events:t})=>{const[i,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(),[d,c]=(0,a.useState)(!1),{locale:u,hourFormat:g,eventRenderer:h,onEventClick:v,timeZone:y,disableViewer:p}=F(),m=(0,x.useTheme)(),b=j(g),O=e=>{!(null==e?void 0:e.currentTarget)&&d&&c(!1),s((null==e?void 0:e.currentTarget)||null)};return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(x.List,{children:t.map((t=>{const a=f({dateLeft:t.start,dateRight:e,timeZone:y})?b:`MMM d, ${b}`,i=(0,r.format)(t.start,a,{locale:u}),s=f({dateLeft:t.end,dateRight:e,timeZone:y})?b:`MMM d, ${b}`,o=(0,r.format)(t.end,s,{locale:u});return"function"==typeof h?h({event:t,onClick:O}):(0,n.jsxs)(x.ListItemButton,Object.assign({focusRipple:!0,disableRipple:p,tabIndex:p?-1:0,disabled:t.disabled,onClick:e=>{e.preventDefault(),e.stopPropagation(),p||O(e),l(t),"function"==typeof v&&v(t)}},{children:[(0,n.jsx)(x.ListItemAvatar,{children:(0,n.jsx)(x.Avatar,Object.assign({sx:{bgcolor:t.disabled?"#d0d0d0":t.color||m.palette.primary.main,color:t.disabled?"#808080":t.textColor||m.palette.primary.contrastText}},{children:t.agendaAvatar||" "}))}),(0,n.jsx)(x.ListItemText,{primary:t.title,secondary:`${i} - ${o}`})]}),`${t.start.getTime()}_${t.end.getTime()}_${t.event_id}`)}))}),o&&(0,n.jsx)(ie,{anchorEl:i,event:o,onTriggerViewer:O})]})},oe=()=>{const{height:e,translations:t}=F();return(0,n.jsx)(B,Object.assign({sx:{borderWidth:1,padding:1,height:e/2,display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,n.jsx)("div",Object.assign({className:"rs__cell rs__agenda_items"},{children:(0,n.jsx)(x.Typography,{children:t.noDataToDisplay})}))}))},le=({daysList:e,events:t})=>{const{week:i,handleGotoDay:s,locale:o,timeZone:l,translations:d,alwaysShowAgendaDays:c}=F(),{disableGoToDay:g,headRenderer:h}=i,v=(0,a.useMemo)((()=>e.some((e=>u(t,e).length>0))),[e,t]);return c||v?(0,n.jsx)(B,{children:e.map(((e,a)=>{const i=f({dateLeft:e,timeZone:l}),v=u(t,e);return c||v.length?(0,n.jsxs)("div",Object.assign({className:"rs__agenda_row "+((0,r.isToday)(e)?"rs__today_cell":"")},{children:[(0,n.jsx)("div",Object.assign({className:"rs__cell rs__agenda__cell"},{children:"function"==typeof h?(0,n.jsx)("div",{children:h(e)}):(0,n.jsx)(x.Typography,Object.assign({sx:{fontWeight:i?"bold":"inherit"},color:i?"primary":"inherit",variant:"body2",className:g?"":"rs__hover__op",onClick:t=>{t.stopPropagation(),g||s(e)}},{children:(0,r.format)(e,"dd E",{locale:o})}))})),(0,n.jsx)("div",Object.assign({className:"rs__cell rs__agenda_items"},{children:v.length>0?(0,n.jsx)(se,{day:e,events:v}):(0,n.jsx)(x.Typography,Object.assign({sx:{padding:1}},{children:d.noDataToDisplay}))}))]}),a):null}))}):(0,n.jsx)(oe,{})},de=()=>{const e=(0,a.useRef)(null),t=(0,a.useRef)(null);return(0,a.useEffect)((()=>{const n=e.current,a=t.current,r=e=>{const t=e.currentTarget;null==a||a.scroll({left:t.scrollLeft}),null==n||n.scroll({left:t.scrollLeft})};return null==n||n.addEventListener("scroll",r),null==a||a.addEventListener("scroll",r),()=>{null==n||n.removeEventListener("scroll",r),null==a||a.removeEventListener("scroll",r)}})),{headersRef:e,bodyRef:t}},ce=({date:e,onClick:t,locale:a})=>{const{timeZone:i}=F(),s=f({dateLeft:e,timeZone:i});return(0,n.jsxs)("div",{children:[(0,n.jsx)(x.Typography,Object.assign({style:{fontWeight:s?"bold":"inherit"},color:s?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},{children:(0,r.format)(e,"dd",{locale:a})})),(0,n.jsx)(x.Typography,Object.assign({color:s?"primary":"inherit",style:{fontWeight:s?"bold":"inherit",fontSize:11}},{children:(0,r.format)(e,"eee",{locale:a})}))]})},ue=(0,a.createContext)({renderedSlots:{},setRenderedSlot:()=>{}}),ge=()=>(0,a.useContext)(ue),he=require("@mui/icons-material/ArrowRightRounded");var ve=e.n(he);const ye=require("@mui/icons-material/ArrowLeftRounded");var pe=e.n(ye);const me=({event:e,multiday:t,hasPrev:i,hasNext:s,showdate:o=!0})=>{const{direction:l,locale:c,hourFormat:u,eventRenderer:g,onEventClick:h,view:v,disableViewer:y}=F(),p=(e=>{const{setCurrentDragged:t}=F(),n=(0,x.useTheme)();return{draggable:!0,onDragStart:a=>{a.stopPropagation(),t(e),a.currentTarget.style.backgroundColor=n.palette.error.main},onDragEnd:a=>{t(),a.currentTarget.style.backgroundColor=e.color||n.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}}})(e),[m,f]=(0,a.useState)(null),[b,O]=(0,a.useState)(!1),_=(0,x.useTheme)(),w=j(u),D="rtl"===l?pe():ve(),k="rtl"===l?ve():pe(),C=d(e.start,e.end)<=0&&e.allDay,{canDrag:M}=Q(e),T=e=>{!(null==e?void 0:e.currentTarget)&&b&&O(!1),f((null==e?void 0:e.currentTarget)||null)},S=(0,a.useMemo)((()=>{if("function"==typeof g&&!t&&"month"!==v){const t=g(Object.assign({event:e,onClick:T},p));if(t)return(0,n.jsx)(z,{children:t},`${e.start.getTime()}_${e.end.getTime()}_${e.event_id}`)}let a=(0,n.jsxs)("div",Object.assign({style:{padding:"2px 6px"}},{children:[(0,n.jsx)(x.Typography,Object.assign({variant:"subtitle2",style:{fontSize:12},noWrap:!0},{children:e.title})),o&&(0,n.jsx)(x.Typography,Object.assign({style:{fontSize:11},noWrap:!0},{children:`${(0,r.format)(e.start,w,{locale:c})} - ${(0,r.format)(e.end,w,{locale:c})}`}))]}));return t&&(a=(0,n.jsxs)("div",Object.assign({style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[(0,n.jsx)(x.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:i?(0,n.jsx)(k,{fontSize:"small",sx:{display:"flex"}}):o&&!C&&(0,r.format)(e.start,w,{locale:c})})),(0,n.jsx)(x.Typography,Object.assign({variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},{children:e.title})),(0,n.jsx)(x.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:s?(0,n.jsx)(D,{fontSize:"small",sx:{display:"flex"}}):o&&!C&&(0,r.format)(e.end,w,{locale:c})}))]}))),(0,n.jsx)(z,Object.assign({disabled:e.disabled,sx:Object.assign({bgcolor:e.disabled?"#d0d0d0":e.color||_.palette.primary.main,color:e.disabled?"#808080":e.textColor||_.palette.primary.contrastText},e.sx||{})},{children:(0,n.jsx)(x.ButtonBase,Object.assign({onClick:t=>{t.preventDefault(),t.stopPropagation(),y||T(t),"function"==typeof h&&h(e)},focusRipple:!0,tabIndex:y?-1:0,disableRipple:y,disabled:e.disabled},{children:(0,n.jsx)("div",Object.assign({},p,{draggable:M},{children:a}))}))}),`${e.start.getTime()}_${e.end.getTime()}_${e.event_id}`)}),[i,s,e,M,c,_.palette]);return(0,n.jsxs)(a.Fragment,{children:[S,(0,n.jsx)(ie,{anchorEl:m,event:e,onTriggerViewer:T})]})};function fe({startHour:e,step:t,minuteHeight:n,timeZone:a}){const i=p(new Date,a),s=(0,r.differenceInMinutes)(i,(0,r.set)(i,{hours:e,minutes:0}));return s*n+(s/t+1)}const je=e=>{const[t,r]=(0,a.useState)(fe(e)),{startHour:i,step:s,minuteHeight:o,timeZone:l}=e;return(0,a.useEffect)((()=>{const e={startHour:i,step:s,minuteHeight:o,timeZone:l};r(fe(e));const t=setInterval((()=>r(fe(e))),6e4);return()=>clearInterval(t)}),[i,s,o,l]),t<0?null:(0,n.jsxs)(Z,Object.assign({style:{top:t,zIndex:e.zIndex}},{children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}))},xe=({todayEvents:e,today:t,startHour:i,endHour:s,step:o,minuteHeight:l,direction:d,timeZone:c})=>{const u=[];return(0,n.jsxs)(a.Fragment,{children:[f({dateLeft:t,timeZone:c})&&(0,n.jsx)(je,{startHour:i,step:o,minuteHeight:l,timeZone:c,zIndex:2*e.length+1}),e.map(((t,a)=>{const c=(60*s-60*i)*l,g=(0,r.differenceInMinutes)(t.end,t.start)*l,h=Math.min(g,c)-1,v=60*i,y=60*t.start.getHours()+t.start.getMinutes(),p=Math.max(y-v,0),m=h/60*1,f=p*l+p/o,j=((e,t)=>e.filter((e=>e.event_id!==t.event_id&&((0,r.isWithinInterval)((0,r.addMinutes)(t.start,1),{start:e.start,end:e.end})||(0,r.isWithinInterval)((0,r.addMinutes)(t.end,-1),{start:e.start,end:e.end})||(0,r.isWithinInterval)((0,r.addMinutes)(e.start,1),{start:t.start,end:t.end})||(0,r.isWithinInterval)((0,r.addMinutes)(e.end,-1),{start:t.start,end:t.end})))))(e,t),x=j.filter((e=>u.includes(e.event_id)));return u.push(t.event_id),(0,n.jsx)("div",Object.assign({className:"rs__event__item",style:{height:h+m,top:f,width:x.length>0?`calc(100% - ${100-98/(x.length+1)}%)`:"98%",zIndex:e.length+a,["rtl"===d?"right":"left"]:x.length>0?100/(j.length+1)*x.length+"%":""}},{children:(0,n.jsx)(me,{event:t})}),t.event_id)}))]})},be=({day:e,start:t,end:a,resourceKey:r,resourceVal:i,cellRenderer:s,height:o,children:l})=>{const d=(({start:e,end:t,resourceKey:n,resourceVal:a})=>{const{triggerDialog:r,onCellClick:i,onDrop:s,currentDragged:o,setCurrentDragged:l,editable:d,timeZone:c}=F(),u=(0,x.useTheme)();return{tabIndex:d?0:-1,disableRipple:!d,onClick:()=>{d&&r(!0,{start:e,end:t,[n]:a}),i&&"function"==typeof i&&i(e,t,n,a)},onDragOver:e=>{e.preventDefault(),o&&(e.currentTarget.style.backgroundColor=(0,x.alpha)(u.palette.secondary.main,.3))},onDragEnter:e=>{o&&(e.currentTarget.style.backgroundColor=(0,x.alpha)(u.palette.secondary.main,.3))},onDragLeave:e=>{o&&(e.currentTarget.style.backgroundColor="")},onDrop:t=>{if(o&&o.event_id){t.preventDefault(),t.currentTarget.style.backgroundColor="";const r=m(e,c);s(t,o.event_id.toString(),r,n,a),l()}},[n]:a}})({start:t,end:a,resourceKey:r,resourceVal:i});return s?s(Object.assign({day:e,start:t,end:a,height:o},d)):(0,n.jsx)(x.Button,Object.assign({fullWidth:!0,"aria-label":`${t.toLocaleString("en",{dateStyle:"full",timeStyle:"long"})} - ${a.toLocaleString("en",{dateStyle:"full",timeStyle:"long"})}`},d,{children:l}))},Oe=({daysList:e,hours:t,cellHeight:i,minutesHeight:s,resourcedEvents:o,resource:l})=>{const{week:u,events:g,handleGotoDay:h,resources:y,resourceFields:p,resourceViewMode:m,direction:f,locale:b,hourFormat:O,timeZone:_,stickyNavigation:w}=F(),{startHour:D,endHour:k,step:C,cellRenderer:M,disableGoToDay:T,headRenderer:S,hourRenderer:E}=u,{renderedSlots:I}=ge(),{headersRef:R,bodyRef:N}=de(),P=(0,r.startOfDay)(e[0]),$=(0,r.endOfDay)(e[e.length-1]),W=j(O),L=(0,a.useMemo)((()=>{const t=y.length&&"default"===m;return 28*v(t?g:o,e,_,!0).length+45}),[28,e,g,m,o,y.length,_]),A=(t,a,i)=>{const s=(0,r.isSameDay)(P,a);return v(t,e,_).filter((e=>(0,r.isBefore)(e.start,P)?s:(0,r.isSameDay)(e.start,a))).sort(((e,t)=>t.end.getTime()-e.end.getTime())).map((e=>{var t;const s=(0,r.isBefore)((0,r.startOfDay)(e.start),P),o=(0,r.isAfter)((0,r.endOfDay)(e.end),$),l=d(s?P:e.start,o?$:e.end)+1,c=(0,r.format)(a,"yyyy-MM-dd"),u=i?i[p.idField]:"all",g=null===(t=null==I?void 0:I[u])||void 0===t?void 0:t[c],h=(null==g?void 0:g[e.event_id])||0;return(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*h+45,width:99.9*l+"%",overflowX:"hidden"}},{children:(0,n.jsx)(me,{event:e,hasPrev:s,hasNext:o,multiday:!0})}),e.event_id)}))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(H,Object.assign({days:e.length,ref:R,sticky:"1",stickyNavigation:w},{children:[(0,n.jsx)("span",{className:"rs__cell rs__time"}),e.map(((e,t)=>(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,r.isToday)(e)?"rs__today_cell":""),style:{height:L}},{children:["function"==typeof S?(0,n.jsx)("div",{children:S(e)}):(0,n.jsx)(ce,{date:e,onClick:T?void 0:h,locale:b}),A(o,e,l)]}),t)))]})),(0,n.jsx)(H,Object.assign({days:e.length,ref:N},{children:t.map(((t,d)=>(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{height:i},className:"rs__cell rs__header rs__time"},{children:"function"==typeof E?(0,n.jsx)("div",{children:E((0,r.format)(t,W,{locale:b}))}):(0,n.jsx)(x.Typography,Object.assign({variant:"caption"},{children:(0,r.format)(t,W,{locale:b})}))})),e.map(((e,a)=>{const u=new Date(`${(0,r.format)(e,"yyyy/MM/dd")} ${(0,r.format)(t,W)}`),g=(0,r.addMinutes)(u,C),h=p.idField;return(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,r.isToday)(e)?"rs__today_cell":"")},{children:[0===d&&(0,n.jsx)(xe,{todayEvents:c(o,e,_),today:e,minuteHeight:s,startHour:D,endHour:k,step:C,direction:f,timeZone:_}),(0,n.jsx)(be,{start:u,end:g,day:e,height:i,resourceKey:h,resourceVal:l?l[h]:null,cellRenderer:M})]}),a)}))]},d)))}))]})};const _e=()=>{const{week:e,selectedDate:t,height:i,events:d,getRemoteEvents:c,triggerLoading:u,handleState:g,resources:h,resourceFields:v,fields:y,agenda:p}=F(),{weekStartOn:m,weekDays:f,startHour:j,endHour:x,step:b}=e,O=(0,r.startOfWeek)(t,{weekStartsOn:m}),_=f.map((e=>(0,r.addDays)(O,e))),w=(0,r.startOfDay)(_[0]),D=(0,r.endOfDay)(_[_.length-1]),k=(0,r.set)(t,{hours:j,minutes:0,seconds:0}),C=(0,r.set)(t,{hours:x,minutes:-b,seconds:0}),M=(0,r.eachMinuteOfInterval)({start:k,end:C},{step:b}),T=l(i,M.length),S=o(T,b),E=(0,a.useCallback)((()=>{return e=void 0,t=void 0,a=function*(){try{u(!0);const e=yield c({start:w,end:D,view:"week"});Array.isArray(e)&&g(e,"events")}catch(e){throw e}finally{u(!1)}},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}));var e,t,n,a}),[t,c]);(0,a.useEffect)((()=>{c instanceof Function&&E()}),[E,c]);const I=e=>{let t=d;return e&&(t=s(d,e,v,y)),p?(0,n.jsx)(le,{daysList:_,events:t}):(0,n.jsx)(Oe,{resourcedEvents:t,resource:e,hours:M,cellHeight:T,minutesHeight:S,daysList:_})};return h.length?(0,n.jsx)(P,{renderChildren:I}):I()},we=require("@mui/x-date-pickers/LocalizationProvider"),De=require("@mui/x-date-pickers/AdapterDateFnsV3"),ke=({children:e})=>{const{locale:t}=F();return(0,n.jsx)(we.LocalizationProvider,Object.assign({dateAdapter:De.AdapterDateFns,adapterLocale:t},{children:e}))},Ce=require("@mui/icons-material/NavigateBeforeRounded");var Me=e.n(Ce);const Te=require("@mui/icons-material/NavigateNextRounded");var Se=e.n(Te);const Fe=e=>{var{type:t,onClick:a}=e,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["type","onClick"]);const{direction:i}=F();let s=Se();return"prev"===t?s="rtl"===i?Se():Me():"next"===t&&(s="rtl"===i?Me():Se()),(0,n.jsx)(x.IconButton,Object.assign({style:{padding:2},onClick:a,onDragOver:e=>{e.preventDefault(),a&&a()}},r,{children:(0,n.jsx)(s,{})}))},Ee=require("@mui/x-date-pickers"),Ie=({selectedDate:e,onChange:t,weekProps:i})=>{const{locale:s,navigationPickerProps:o}=F(),[l,d]=(0,a.useState)(null),{weekStartOn:c}=i,u=(0,r.startOfWeek)(e,{weekStartsOn:c}),g=(0,r.endOfWeek)(e,{weekStartsOn:c}),h=()=>{d(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Fe,{type:"prev",onClick:()=>{const e=(0,r.addDays)(u,-1);t(e)},"aria-label":"previous week"}),(0,n.jsx)(x.Button,Object.assign({style:{padding:4},onClick:e=>{d(e.currentTarget)},"aria-label":"selected week"},{children:`${(0,r.format)(u,"dd",{locale:s})} - ${(0,r.format)(g,"dd MMM yyyy",{locale:s})}`})),(0,n.jsx)(x.Popover,Object.assign({open:Boolean(l),anchorEl:l,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(ke,{children:(0,n.jsx)(Ee.DateCalendar,Object.assign({},o,{openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date),h()}}))})})),(0,n.jsx)(Fe,{type:"next",onClick:()=>{const e=(0,r.addDays)(g,1);t(e)},"aria-label":"next week"})]})},Re=({selectedDate:e,onChange:t})=>{const{locale:i,navigationPickerProps:s}=F(),[o,l]=(0,a.useState)(null),d=()=>{l(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Fe,{type:"prev",onClick:()=>{const n=(0,r.addDays)(e,-1);t(n)},"aria-label":"previous day"}),(0,n.jsx)(x.Button,Object.assign({style:{padding:4},onClick:e=>{l(e.currentTarget)},"aria-label":"selected date"},{children:(0,r.format)(e,"dd MMMM yyyy",{locale:i})})),(0,n.jsx)(x.Popover,Object.assign({open:Boolean(o),anchorEl:o,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(ke,{children:(0,n.jsx)(Ee.DateCalendar,Object.assign({},s,{openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date),d()}}))})})),(0,n.jsx)(Fe,{type:"next",onClick:()=>{const n=(0,r.addDays)(e,1);t(n)},"aria-label":"next day"})]})},Ne=({selectedDate:e,onChange:t})=>{const{locale:i,navigationPickerProps:s}=F(),o=(0,r.getMonth)(e),[l,d]=(0,a.useState)(null),c=()=>{d(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Fe,{type:"prev",onClick:()=>{const n=o-1;t((0,r.setMonth)(e,n))},"aria-label":"previous month"}),(0,n.jsx)(x.Button,Object.assign({style:{padding:4},onClick:e=>{d(e.currentTarget)},"aria-label":"selected month"},{children:(0,r.format)(e,"MMMM yyyy",{locale:i})})),(0,n.jsx)(x.Popover,Object.assign({open:Boolean(l),anchorEl:l,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(ke,{children:(0,n.jsx)(Ee.DateCalendar,Object.assign({},s,{openTo:"month",views:["year","month"],value:e,onChange:e=>{t(e||new Date),c()}}))})})),(0,n.jsx)(Fe,{type:"next",onClick:()=>{const n=o+1;t((0,r.setMonth)(e,n))},"aria-label":"next month"})]})},Pe=require("@mui/icons-material/MoreVert");var $e=e.n(Pe);const We=require("@mui/icons-material/ViewAgenda");var Le=e.n(We);const Ae=()=>{const{selectedDate:e,view:t,week:r,handleState:i,getViews:s,translations:o,navigation:l,day:d,month:c,disableViewNavigator:u,onSelectedDateChange:g,onViewChange:h,stickyNavigation:v,timeZone:y,agenda:m,toggleAgenda:f,enableAgenda:j}=F(),[b,O]=(0,a.useState)(null),_=(0,x.useTheme)(),w=(0,x.useMediaQuery)(_.breakpoints.up("sm")),D=s(),k=e=>{O(e||null)},C=e=>{i(e,"selectedDate"),g&&"function"==typeof g&&g(e)},M=e=>{i(e,"view"),h&&"function"==typeof h&&h(e,m)};return!l&&u?null:(0,n.jsxs)(A,Object.assign({sticky:v?"1":"0"},{children:[(0,n.jsx)("div",Object.assign({"data-testid":"date-navigator"},{children:l&&(()=>{switch(t){case"month":return(null==c?void 0:c.navigation)&&(0,n.jsx)(Ne,{selectedDate:e,onChange:C});case"week":return(null==r?void 0:r.navigation)&&(0,n.jsx)(Ie,{selectedDate:e,onChange:C,weekProps:r});case"day":return(null==d?void 0:d.navigation)&&(0,n.jsx)(Re,{selectedDate:e,onChange:C});default:return""}})()})),(0,n.jsxs)("div",Object.assign({className:"rs__view_navigator","data-testid":"view-navigator",style:{visibility:u?"hidden":"visible"}},{children:[(0,n.jsx)(x.Button,Object.assign({onClick:()=>C(p(new Date,y)),"aria-label":o.navigation.today},{children:o.navigation.today})),j&&(w?(0,n.jsx)(x.Button,Object.assign({color:m?"primary":"inherit",onClick:f,"aria-label":o.navigation.agenda},{children:o.navigation.agenda})):(0,n.jsx)(x.IconButton,Object.assign({color:m?"primary":"default",style:{padding:5},onClick:f},{children:(0,n.jsx)(Le(),{})}))),D.length>1&&(w?D.map((e=>(0,n.jsx)(x.Button,Object.assign({color:e===t?"primary":"inherit",onClick:()=>M(e),onDragOver:t=>{t.preventDefault(),M(e)}},{children:o.navigation[e]}),e))):(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(x.IconButton,Object.assign({style:{padding:5},onClick:e=>{k(e.currentTarget)}},{children:(0,n.jsx)($e(),{})})),(0,n.jsx)(x.Popover,Object.assign({open:Boolean(b),anchorEl:b,onClose:()=>{k()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:(0,n.jsx)(x.MenuList,Object.assign({autoFocusItem:!!b,disablePadding:!0},{children:D.map((e=>(0,n.jsx)(x.MenuItem,Object.assign({selected:e===t,onClick:()=>{k(),M(e)}},{children:o.navigation[e]}),e)))}))}))]}))]}))]}))},Be=require("@mui/x-date-pickers/DatePicker"),He=require("@mui/x-date-pickers/DateTimePicker"),ze=({type:e="datetime",value:t,label:r,name:i,onChange:s,variant:o="outlined",error:l,errMsg:d,touched:c,required:u})=>{var g;const{translations:h}=F(),[v,y]=(0,a.useState)({touched:!1,valid:!!t,errorMsg:d||(u?(null===(g=null==h?void 0:h.validation)||void 0===g?void 0:g.required)||"Required":void 0)}),p="date"===e?Be.DatePicker:He.DateTimePicker,m=v.touched&&(l||!v.valid);(0,a.useEffect)((()=>{c&&f(t)}),[c]);const f=e=>{var t;const n=!isNaN(Date.parse(e)),a="string"==typeof e&&n?new Date(e):e;let r=!0,o=d;u&&!a&&(r=!1,o=d||(null===(t=null==h?void 0:h.validation)||void 0===t?void 0:t.required)||"Required"),y((e=>Object.assign(Object.assign({},e),{touched:!0,valid:r,errorMsg:o}))),s(i,a)};return(0,n.jsx)(ke,{children:(0,n.jsx)(p,{value:t instanceof Date?t:new Date(t),label:r,onChange:e=>{f(e)},minutesStep:5,slotProps:{textField:{variant:o,helperText:m&&v.errorMsg,error:m,fullWidth:!0}}})})},qe=({variant:e="outlined",label:t,placeholder:r,value:i,name:s,required:o,min:l,max:d,email:c,decimal:u,onChange:g,disabled:h,multiline:v,rows:y,touched:p})=>{const[m,f]=(0,a.useState)({touched:!1,valid:!1,errorMsg:""}),{translations:j}=F();(0,a.useEffect)((()=>{p&&b(i)}),[p]);const b=e=>{var t,n,a,r,i,h,v,y,p;const m=e;let x=!0,b="";c&&(x=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(m)&&x,b=(null===(t=null==j?void 0:j.validation)||void 0===t?void 0:t.invalidEmail)||"Invalid Email"),u&&(x=/^[0-9]+(\.[0-9]*)?$/.test(m)&&x,b=(null===(n=null==j?void 0:j.validation)||void 0===n?void 0:n.onlyNumbers)||"Only Numbers Allowed"),l&&`${m}`.trim().length<l&&(x=!1,b="function"==typeof(null===(a=null==j?void 0:j.validation)||void 0===a?void 0:a.min)?null===(r=null==j?void 0:j.validation)||void 0===r?void 0:r.min(l):(null===(i=null==j?void 0:j.validation)||void 0===i?void 0:i.min)||`Minimum ${l} letters`),d&&`${m}`.trim().length>d&&(x=!1,b="function"==typeof(null===(h=null==j?void 0:j.validation)||void 0===h?void 0:h.max)?null===(v=null==j?void 0:j.validation)||void 0===v?void 0:v.max(d):(null===(y=null==j?void 0:j.validation)||void 0===y?void 0:y.max)||`Maximum ${d} letters`),o&&`${m}`.trim().length<=0&&(x=!1,b=(null===(p=null==j?void 0:j.validation)||void 0===p?void 0:p.required)||"Required"),f({touched:!0,valid:x,errorMsg:b}),g(s,m,x)};return(0,n.jsx)(x.TextField,{variant:e,label:t&&(0,n.jsx)(x.Typography,Object.assign({variant:"body2"},{children:`${t} ${o?"*":""}`})),value:i,name:s,onChange:e=>b(e.target.value),disabled:h,error:m.touched&&!m.valid,helperText:m.touched&&!m.valid&&m.errorMsg,multiline:v,rows:y,style:{width:"100%"},InputProps:{placeholder:r||""}})},Ve=require("@mui/icons-material/ExpandMore");var Ze=e.n(Ve);const Ge=({options:e,value:t,name:r,required:i,onChange:s,label:o,disabled:l,touched:d,variant:c="outlined",loading:u,multiple:g,placeholder:h,errMsg:v})=>{var y;const p=(0,x.useTheme)(),{translations:m}=F(),[f,j]=(0,a.useState)({touched:!1,valid:!!t,errorMsg:v||(i?(null===(y=null==m?void 0:m.validation)||void 0===y?void 0:y.required)||"Required":void 0)});(0,a.useEffect)((()=>{d&&b(t)}),[d]);const b=e=>{var t;const n=e;let a=!0,o=v;!i||(g?n.length:n)||(a=!1,o=v||(null===(t=null==m?void 0:m.validation)||void 0===t?void 0:t.required)||"Required"),j((e=>Object.assign(Object.assign({},e),{touched:!0,valid:a,errorMsg:o}))),s(r,n,a)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x.FormControl,Object.assign({variant:c||"outlined",fullWidth:!0,error:i&&f.touched&&!f.valid,disabled:l},{children:[o&&(0,n.jsx)(x.InputLabel,Object.assign({id:`input_${r}`},{children:(0,n.jsx)(x.Typography,Object.assign({variant:"body2"},{children:`${o} ${i?"*":""}`}))})),(0,n.jsxs)(x.Select,Object.assign({label:o,labelId:`input_${r}`,value:t,onBlur:()=>{f.touched||j((e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:v||e.errorMsg})))},onChange:e=>b(e.target.value),IconComponent:u?()=>(0,n.jsx)(x.CircularProgress,{size:5}):Ze(),multiple:!!g,classes:{select:"chips"===g?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return(0,n.jsx)("em",{children:o});const a=[];if(g){for(const n of e)t.includes(n.value)&&a.push([n.text]);return"chips"===g?a.map(((e,t)=>(0,n.jsx)(x.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`))):a.join(",")}for(const n of e)t===n.value&&a.push([n.text]);return a.join(",")}},{children:[h&&(0,n.jsx)(x.MenuItem,Object.assign({value:""},{children:(0,n.jsx)("em",{children:h})})),e.map((e=>(0,n.jsxs)(x.MenuItem,Object.assign({value:e.value},{children:[g&&(0,n.jsx)(x.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text]}),e.id||e.value)))]}))]})),(0,n.jsx)(x.FormHelperText,Object.assign({style:{color:p.palette.error.main}},{children:f.touched&&!f.valid&&f.errorMsg}))]})};const Ue=(e,t)=>{var n;const a={};for(const r of e){const e=i(r,r.default,t),s=i(r,null==t?void 0:t[r.name],t);a[r.name]={value:s.value||e.value||"",validity:!(null===(n=r.config)||void 0===n?void 0:n.required)||!!s.validity||!!e.validity,type:r.type,config:r.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},a)},Ke=()=>{const{fields:e,dialog:t,triggerDialog:i,selectedRange:s,selectedEvent:o,resourceFields:l,selectedResource:d,triggerLoading:c,onConfirm:u,customEditor:g,confirmEvent:h,dialogMaxWidth:v,translations:y,timeZone:p}=F(),[f,j]=(0,a.useState)(Ue(e,o||s)),[b,O]=(0,a.useState)(!1),_=(0,x.useTheme)(),w=(0,x.useMediaQuery)(_.breakpoints.down("sm")),D=(e,t,n)=>{j((a=>Object.assign(Object.assign({},a),{[e]:Object.assign(Object.assign({},a[e]),{value:t,validity:n})})))},k=t=>{t&&j(Ue(e)),i(!1)},C=()=>{return e=void 0,t=void 0,a=function*(){let e={};for(const t in f)if(e[t]=f[t].value,!g&&!f[t].validity)return O(!0);try{c(!0),e.end=e.start>=e.end?(0,r.addMinutes)(e.start,(0,r.differenceInMinutes)(null==s?void 0:s.end,null==s?void 0:s.start)):e.end;const t=(null==o?void 0:o.event_id)?"edit":"create";u?e=yield u(e,t):e.event_id=(null==o?void 0:o.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),e.start=m(e.start,p),e.end=m(e.end,p),h(e,t),k(!0)}catch(e){console.error(e)}finally{c(!1)}},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}));var e,t,n,a},M=t=>{var a,r,i;const s=f[t];switch(s.type){case"input":return(0,n.jsx)(qe,Object.assign({value:s.value,name:t,onChange:D,touched:b},s.config,{label:y.event[t]||(null===(a=s.config)||void 0===a?void 0:a.label)}));case"date":return(0,n.jsx)(ze,Object.assign({value:s.value,name:t,onChange:(...e)=>D(...e,!0),touched:b},s.config,{label:y.event[t]||(null===(r=s.config)||void 0===r?void 0:r.label)}));case"select":const o=e.find((e=>e.name===t));return(0,n.jsx)(Ge,Object.assign({value:s.value,name:t,options:(null==o?void 0:o.options)||[],onChange:D,touched:b},s.config,{label:y.event[t]||(null===(i=s.config)||void 0===i?void 0:i.label)}));default:return""}};return(0,n.jsx)(x.Dialog,Object.assign({open:t,fullScreen:w,maxWidth:v,onClose:()=>{i(!1)}},{children:(()=>{if(g){const e={state:f,close:()=>i(!1),loading:e=>c(e),edited:o,onConfirm:h,[l.idField]:d};return g(e)}return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(x.DialogTitle,{children:o?y.form.editTitle:y.form.addTitle}),(0,n.jsx)(x.DialogContent,Object.assign({style:{overflowX:"hidden"}},{children:(0,n.jsx)(x.Grid,Object.assign({container:!0,spacing:2},{children:Object.keys(f).map((e=>{var t;const a=f[e];return(0,n.jsx)(x.Grid,Object.assign({item:!0,sm:null===(t=a.config)||void 0===t?void 0:t.sm,xs:12},{children:M(e)}),e)}))}))})),(0,n.jsxs)(x.DialogActions,{children:[(0,n.jsx)(x.Button,Object.assign({color:"inherit",fullWidth:!0,onClick:()=>k()},{children:y.form.cancel})),(0,n.jsx)(x.Button,Object.assign({color:"primary",fullWidth:!0,onClick:C},{children:y.form.confirm}))]})]})})()}))},Xe=({events:e})=>{const{month:t,handleGotoDay:i,locale:s,timeZone:o,selectedDate:l,translations:d,alwaysShowAgendaDays:c}=F(),{disableGoToDay:g,headRenderer:h}=t,v=(0,r.getDaysInMonth)(l),y=Array.from({length:v},((e,t)=>t+1)),p=(0,a.useMemo)((()=>e.filter((e=>(0,r.isSameMonth)(e.start,l)))),[e,l]);return c||p.length?(0,n.jsx)(B,{children:y.map((t=>{const a=new Date(l.getFullYear(),l.getMonth(),t),v=f({dateLeft:a,timeZone:o}),y=u(e,a);return c||y.length?(0,n.jsxs)("div",Object.assign({className:"rs__agenda_row "+((0,r.isToday)(a)?"rs__today_cell":"")},{children:[(0,n.jsx)("div",Object.assign({className:"rs__cell rs__agenda__cell"},{children:"function"==typeof h?(0,n.jsx)("div",{children:h(a)}):(0,n.jsx)(x.Typography,Object.assign({sx:{fontWeight:v?"bold":"inherit"},color:v?"primary":"inherit",variant:"body2",className:g?"":"rs__hover__op",onClick:e=>{e.stopPropagation(),g||i(a)}},{children:(0,r.format)(a,"dd E",{locale:s})}))})),(0,n.jsx)("div",Object.assign({className:"rs__cell rs__agenda_items"},{children:y.length>0?(0,n.jsx)(se,{day:a,events:y}):(0,n.jsx)(x.Typography,Object.assign({sx:{padding:1}},{children:d.noDataToDisplay}))}))]}),t):null}))}):(0,n.jsx)(oe,{})},Qe=({events:e,resourceId:t,today:i,eachWeekStart:s,eachFirstDayInCalcRow:o,daysList:l,onViewMore:c,cellHeight:u})=>{const g=Math.round((u-27)/28-1),{translations:h,month:v,locale:p,timeZone:m}=F(),{renderedSlots:f}=ge(),j=(0,a.useMemo)((()=>{var a;const u=[];for(let j=0;j<Math.min(e.length,g+1);j++){const b=y(e[j],m),O=!!o&&(0,r.isBefore)(b.start,o),_=O&&o?o:b.start;let w=d(_,b.end)+1;const D=(0,r.differenceInCalendarWeeks)(b.end,_,{weekStartsOn:null==v?void 0:v.weekStartOn,locale:p})>0;if(D){const e=(0,r.startOfWeek)(b.start,{weekStartsOn:null==v?void 0:v.weekStartOn,locale:p}),t=(0,r.closestTo)(e,s);t&&(w=l.length-(o?0:(0,r.differenceInDays)(b.start,t)))}const k=(0,r.format)(i,"yyyy-MM-dd"),C=null===(a=null==f?void 0:f[t||"all"])||void 0===a?void 0:a[k],M=(null==C?void 0:C[b.event_id])||0,T=28*Math.min(M,g)+27;if(M>=g){u.push((0,n.jsx)(x.Typography,Object.assign({width:"100%",className:"rs__multi_day rs__hover__op",style:{top:T,fontSize:11},onClick:e=>{e.stopPropagation(),c(b.start)}},{children:`${Math.abs(e.length-j)} ${h.moreEvents}`}),j));break}u.push((0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:T,width:100*w+"%"}},{children:(0,n.jsx)(me,{event:b,showdate:!1,multiday:d(b.start,b.end)>0,hasPrev:O,hasNext:D})}),`${b.event_id}_${j}`))}return u}),[t,f,e,g,o,null==v?void 0:v.weekStartOn,p,i,s,l.length,h.moreEvents,c,m]);return(0,n.jsx)(a.Fragment,{children:j})},Ye=({daysList:e,resource:t,eachWeekStart:i})=>{const{height:o,month:l,selectedDate:d,events:c,handleGotoDay:u,resourceFields:g,fields:v,locale:y,hourFormat:p,stickyNavigation:m,timeZone:b,onClickMore:O}=F(),{weekDays:_,startHour:w,endHour:D,cellRenderer:k,headRenderer:C,disableGoToDay:M}=l,{headersRef:T,bodyRef:S}=de(),E=(0,x.useTheme)(),I=(0,r.startOfMonth)(d),R=j(p),N=o/i.length,P=(0,a.useCallback)((t=>{let o=h(c);t&&(o=s(c,t,g,v));const l=[];for(const s of i){const c=_.map((l=>{const c=(0,r.addDays)(s,l),h=new Date(`${(0,r.format)((0,r.setHours)(c,w),`yyyy/MM/dd ${R}`)}`),v=new Date(`${(0,r.format)((0,r.setHours)(c,D),`yyyy/MM/dd ${R}`)}`),y=g.idField,p=(0,r.isSameDay)(s,c)?c:null,m=o.filter((e=>p&&(0,r.isWithinInterval)(p,{start:(0,r.startOfDay)(e.start),end:(0,r.endOfDay)(e.end)})||(0,r.isSameDay)(e.start,c))),j=f({dateLeft:c,timeZone:b});return(0,n.jsxs)("span",Object.assign({style:{height:N},className:"rs__cell"},{children:[(0,n.jsx)(be,{start:h,end:v,day:d,height:N,resourceKey:y,resourceVal:t?t[y]:null,cellRenderer:k}),(0,n.jsxs)(a.Fragment,{children:["function"==typeof C?(0,n.jsx)("div",Object.assign({style:{position:"absolute",top:0}},{children:C(c)})):(0,n.jsx)(x.Avatar,Object.assign({style:{width:27,height:27,position:"absolute",top:0,background:j?E.palette.secondary.main:"transparent",color:j?E.palette.secondary.contrastText:"",marginBottom:2}},{children:(0,n.jsx)(x.Typography,Object.assign({color:(0,r.isSameMonth)(c,I)?"textPrimary":"#ccc",className:M?"":"rs__hover__op",onClick:e=>{e.stopPropagation(),M||u(c)}},{children:(0,r.format)(c,"dd")}))})),(0,n.jsx)(Qe,{events:m,resourceId:null==t?void 0:t[y],today:c,eachWeekStart:i,eachFirstDayInCalcRow:p,daysList:e,onViewMore:e=>{O&&"function"==typeof O?O(e,u):u(e)},cellHeight:N})]})]}),l.toString())}));l.push((0,n.jsx)(a.Fragment,{children:c},s.toString()))}return l}),[N,k,e,M,i,D,c,v,R,u,C,I,O,g,d,w,E.palette.secondary.contrastText,E.palette.secondary.main,b,_]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H,Object.assign({days:e.length,ref:T,indent:"0",sticky:"1",stickyNavigation:m},{children:e.map(((e,t)=>(0,n.jsx)(x.Typography,Object.assign({className:"rs__cell rs__header rs__header__center",align:"center",variant:"body2"},{children:(0,r.format)(e,"EE",{locale:y})}),t)))})),(0,n.jsx)(H,Object.assign({days:e.length,ref:S,indent:"0"},{children:P(t)}))]})};const Je=()=>{const{month:e,selectedDate:t,events:i,getRemoteEvents:o,triggerLoading:l,handleState:d,resources:c,resourceFields:u,fields:g,agenda:v}=F(),{weekStartOn:y,weekDays:p}=e,m=(0,r.startOfMonth)(t),f=(0,r.endOfMonth)(t),j=(0,r.eachWeekOfInterval)({start:m,end:f},{weekStartsOn:y}),x=p.map((e=>(0,r.addDays)(j[0],e))),b=(0,a.useCallback)((()=>{return e=void 0,t=void 0,a=function*(){try{l(!0);const e=j[0],t=(0,r.addDays)(j[j.length-1],x.length),n=yield o({start:e,end:t,view:"month"});n&&(null==n?void 0:n.length)&&d(n,"events")}catch(e){throw e}finally{l(!1)}},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}));var e,t,n,a}),[t,o]);(0,a.useEffect)((()=>{o instanceof Function&&b()}),[b,o]);const O=(0,a.useCallback)((e=>{if(v){let t=h(i);return e&&(t=s(i,e,u,g)),(0,n.jsx)(Xe,{events:t})}return(0,n.jsx)(Ye,{daysList:x,eachWeekStart:j,resource:e})}),[v,x,j,i,g,u]);return c.length?(0,n.jsx)(P,{renderChildren:O}):O()},et=({events:e})=>{const{day:t,locale:i,selectedDate:s,translations:o,alwaysShowAgendaDays:l}=F(),{headRenderer:d}=t,c=(0,a.useMemo)((()=>u(e,s)),[e,s]);return l||c.length?(0,n.jsx)(B,{children:(0,n.jsxs)("div",Object.assign({className:"rs__agenda_row rs__today_cell"},{children:[(0,n.jsx)("div",Object.assign({className:"rs__cell rs__agenda__cell"},{children:"function"==typeof d?(0,n.jsx)("div",{children:d(s)}):(0,n.jsx)(x.Typography,Object.assign({variant:"body2"},{children:(0,r.format)(s,"dd E",{locale:i})}))})),(0,n.jsx)("div",Object.assign({className:"rs__cell rs__agenda_items"},{children:c.length>0?(0,n.jsx)(se,{day:s,events:c}):(0,n.jsx)(x.Typography,Object.assign({sx:{padding:1}},{children:o.noDataToDisplay}))}))]}))}):(0,n.jsx)(oe,{})};const tt=()=>{const{day:e,selectedDate:t,events:i,height:d,getRemoteEvents:u,triggerLoading:g,handleState:h,resources:y,resourceFields:p,resourceViewMode:m,fields:f,direction:b,locale:O,hourFormat:_,timeZone:w,stickyNavigation:D,agenda:k}=F(),{startHour:C,endHour:M,step:T,cellRenderer:S,headRenderer:E,hourRenderer:I}=e,R=(0,r.set)(t,{hours:C,minutes:0,seconds:0}),N=(0,r.set)(t,{hours:M,minutes:-T,seconds:0}),$=(0,r.eachMinuteOfInterval)({start:R,end:N},{step:T}),W=l(d,$.length),L=o(W,T),A=j(_),B=(0,a.useCallback)((()=>{return e=void 0,t=void 0,a=function*(){try{g(!0);const e=(0,r.addDays)(R,-1),t=(0,r.addDays)(N,1),n=yield u({start:e,end:t,view:"day"});n&&(null==n?void 0:n.length)&&h(n,"events")}catch(e){throw e}finally{g(!1)}},new((n=void 0)||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}));var e,t,n,a}),[t,u]);(0,a.useEffect)((()=>{u instanceof Function&&B()}),[B,u]);const z=e=>{const a=v(e,t,w);return(0,n.jsx)("div",Object.assign({className:"rs__block_col",style:{height:28*a.length}},{children:a.map(((e,a)=>{const i=(0,r.isBefore)(e.start,(0,r.startOfDay)(t)),s=(0,r.isAfter)(e.end,(0,r.endOfDay)(t));return(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*a,width:"99.9%",overflowX:"hidden"}},{children:(0,n.jsx)(me,{event:e,multiday:!0,hasPrev:i,hasNext:s})}),e.event_id)}))}))},q=e=>{let o=i;if(e&&(o=s(i,e,p,f)),k)return(0,n.jsx)(et,{events:o});const l=y.length&&"default"===m,d=28*v(l?i:o,t,w).length+45;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(H,Object.assign({days:1,sticky:"1",stickyNavigation:D},{children:[(0,n.jsx)("span",{className:"rs__cell"}),(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,r.isToday)(t)?"rs__today_cell":""),style:{height:d}},{children:["function"==typeof E?(0,n.jsx)("div",{children:E(t)}):(0,n.jsx)(ce,{date:t,locale:O}),z(o)]}))]})),(0,n.jsx)(H,Object.assign({days:1},{children:$.map(((i,s)=>{const l=new Date(`${(0,r.format)(t,"yyyy/MM/dd")} ${(0,r.format)(i,A)}`),d=(0,r.addMinutes)(l,T),u=p.idField;return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("span",Object.assign({className:"rs__cell rs__header rs__time",style:{height:W}},{children:"function"==typeof I?(0,n.jsx)("div",{children:I((0,r.format)(i,A,{locale:O}))}):(0,n.jsx)(x.Typography,Object.assign({variant:"caption"},{children:(0,r.format)(i,A,{locale:O})}))})),(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,r.isToday)(t)?"rs__today_cell":"")},{children:[0===s&&(0,n.jsx)(xe,{todayEvents:c(o,t,w),today:R,minuteHeight:L,startHour:C,endHour:M,step:T,direction:b,timeZone:w}),(0,n.jsx)(be,{start:l,end:d,day:t,height:W,resourceKey:u,resourceVal:e?e[u]:null,cellRenderer:S})]}))]},s)}))}))]})};return y.length?(0,n.jsx)(P,{renderChildren:q}):q()},nt=e=>{const t={};let n=0;for(let a=0;a<e.length;a++){const i=e[a],s=(0,r.eachDayOfInterval)({start:i.start,end:i.end});for(let e=0;e<s.length;e++){const a=(0,r.format)(s[e],"yyyy-MM-dd");if(t[a]){const e=Object.values(t[a]);for(;e.includes(n);)n+=1;t[a][i.event_id]=n}else t[a]={[i.event_id]:n}}n=0}return t},at=(e,t,n,a)=>{const r=h(e),i={};if(t.length)for(const e of t){const t=s(r,e,n,a),o=nt(t);i[e[n.idField]]=o}else i.all=nt(r);return i},rt=({children:e})=>{const{events:t,resources:r,resourceFields:i,fields:s}=F(),[o,l]=(0,a.useState)({renderedSlots:at(t,r,i,s)});return(0,a.useEffect)((()=>{l((e=>Object.assign(Object.assign({},e),{renderedSlots:at(t,r,i,s)})))}),[t,s,i,r]),(0,n.jsx)(ue.Provider,Object.assign({value:Object.assign(Object.assign({},o),{setRenderedSlot:(e,t,n,a)=>{l((r=>{var i,s,o,l,d;return Object.assign(Object.assign({},r),{renderedSlots:Object.assign(Object.assign({},r.renderedSlots),{[a||"all"]:Object.assign(Object.assign({},null===(i=r.renderedSlots)||void 0===i?void 0:i[a||"all"]),{[e]:(null===(o=null===(s=r.renderedSlots)||void 0===s?void 0:s[a||"all"])||void 0===o?void 0:o[e])?Object.assign(Object.assign({},null===(d=null===(l=r.renderedSlots)||void 0===l?void 0:l[a||"all"])||void 0===d?void 0:d[e]),{[t]:n}):{[t]:n}})})})}))}})},{children:e}))},it=(0,a.forwardRef)((function(e,t){const r=F(),{view:i,dialog:s,loading:o,loadingComponent:l,resourceViewMode:d,resources:c,translations:u}=r,g=(0,a.useMemo)((()=>{switch(i){case"month":return(0,n.jsx)(Je,{});case"week":return(0,n.jsx)(_e,{});case"day":return(0,n.jsx)(tt,{});default:return""}}),[i]),h=(0,a.useMemo)((()=>(0,n.jsx)("div",Object.assign({className:"rs__table_loading"},{children:l||(0,n.jsx)("div",Object.assign({className:"rs__table_loading_internal"},{children:(0,n.jsxs)("span",{children:[(0,n.jsx)(x.CircularProgress,{size:50}),(0,n.jsx)(x.Typography,Object.assign({align:"center"},{children:u.loading}))]})}))}))),[l,u.loading]);return(0,n.jsxs)(W,Object.assign({dialog:s?1:0,"data-testid":"rs-wrapper",ref:e=>{t&&(t.current={el:e,scheduler:r})}},{children:[o?h:null,(0,n.jsx)(Ae,{}),(0,n.jsx)(L,Object.assign({resource_count:"default"===d?c.length:1,sx:{overflowX:"default"===d&&c.length>1?"auto":void 0,flexDirection:"vertical"===d?"column":void 0},"data-testid":"grid"},{children:(0,n.jsx)(rt,{children:g})})),s&&(0,n.jsx)(Ke,{})]}))}));const st=({children:e,initial:t})=>{const[s,o]=(0,a.useState)(Object.assign(Object.assign({},T),M(t)));(0,a.useEffect)((()=>{o((e=>Object.assign(Object.assign({},e),{onEventDrop:t.onEventDrop,customEditor:t.customEditor,events:t.events||[]})))}),[t.onEventDrop,t.customEditor,t.events]);const l=()=>(e=>{const t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(s),d=e=>{void 0===t.loading&&o((t=>Object.assign(Object.assign({},t),{loading:e})))},c=(e,t)=>{let n;n="edit"===t?Array.isArray(e)?s.events.map((t=>{const n=e.find((e=>e.event_id===t.event_id));return n?Object.assign(Object.assign({},t),n):t})):s.events.map((t=>t.event_id===e.event_id?Object.assign(Object.assign({},t),e):t)):s.events.concat(e),o((e=>Object.assign(Object.assign({},e),{events:n})))};return(0,n.jsx)(S.Provider,Object.assign({value:Object.assign(Object.assign({},s),{handleState:(e,t)=>{o((n=>Object.assign(Object.assign({},n),{[t]:e})))},getViews:l,toggleAgenda:()=>{o((e=>{const t=!e.agenda;return s.onViewChange&&"function"==typeof s.onViewChange&&s.onViewChange(s.view,t),Object.assign(Object.assign({},e),{agenda:t})}))},triggerDialog:(e,t)=>{const n=t;o((t=>{var a;return Object.assign(Object.assign({},t),{dialog:e,selectedRange:(null==n?void 0:n.event_id)?void 0:n||{start:new Date,end:new Date(Date.now()+36e5)},selectedEvent:(null==n?void 0:n.event_id)?n:void 0,selectedResource:t.selectedResource||(null==n?void 0:n[null===(a=s.resourceFields)||void 0===a?void 0:a.idField])})}))},triggerLoading:d,handleGotoDay:e=>{const t=l();let n;t.includes("day")?(n="day",o((t=>Object.assign(Object.assign({},t),{view:"day",selectedDate:e})))):t.includes("week")?(n="week",o((t=>Object.assign(Object.assign({},t),{view:"week",selectedDate:e})))):console.warn("No Day/Week views available"),n&&s.onViewChange&&"function"==typeof s.onViewChange&&s.onViewChange(n,s.agenda),n&&s.onSelectedDateChange&&"function"==typeof s.onSelectedDateChange&&s.onSelectedDateChange(e)},confirmEvent:c,setCurrentDragged:e=>{o((t=>Object.assign(Object.assign({},t),{currentDragged:e})))},onDrop:(e,t,n,a,o)=>{return l=void 0,u=void 0,h=function*(){var l;const u=s.events.find((e=>"number"==typeof e.event_id?e.event_id===+t:e.event_id===t)),g=s.fields.find((e=>e.name===a)),h=!!(null===(l=null==g?void 0:g.config)||void 0===l?void 0:l.multiple);let v=o;if(g){const e=u[a],t=i(g,e,u).value;if(h)if(t.includes(o)){if((0,r.isEqual)(u.start,n))return;v=t}else v=t.length>1?[...t,o]:[o]}if((0,r.isEqual)(u.start,n)&&(!v||!h&&v===u[a]))return;const y=(0,r.differenceInMinutes)(u.end,u.start),p=Object.assign(Object.assign({},u),{start:n,end:(0,r.addMinutes)(n,y),[a]:v||""});if(!s.onEventDrop||"function"!=typeof s.onEventDrop)return c(p,"edit");try{d(!0);const t=yield s.onEventDrop(e,n,p,u);t&&c(t,"edit")}finally{d(!1)}},new((g=void 0)||(g=Promise))((function(e,t){function n(e){try{r(h.next(e))}catch(e){t(e)}}function a(e){try{r(h.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof g?r:new g((function(e){e(r)}))).then(n,a)}r((h=h.apply(l,u||[])).next())}));var l,u,g,h}})},{children:e}))},ot=(0,a.forwardRef)((function(e,t){return(0,n.jsx)(st,Object.assign({initial:e},{children:(0,n.jsx)(it,{ref:t})}))}));module.exports=t})();